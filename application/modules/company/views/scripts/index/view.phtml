<?php 
echo($this->flashMessages()); 
echo "<div>";
echo HTML::backAnchorIcon("Companies - All", "/index/viewall");
echo "</div>";
?>
<h1 class="header1">Company - View</h1>
<?php
/* @var $Company \Entities\Company */
$Company	= $this->Company;
$company_id	= $Company->getId();
/* @var $Locations \Doctrine\Common\Collections\ArrayCollection */
$Locations	= $Company->getLocations();
$Suppliers	= $Company->getSuppliers();
$Websites	= $Company->getWebsites();
$Employees	= $Company->getEmployees();
$RtoProviders	= $Company->getRtoProviders();
$Dealers	= $Company->getDealers();
?>
<div class="blue_frame bg_blue_fade" style="margin: 20px;margin-bottom: 0px;padding: 5px;">
    <h4 class="no_space" style="color: #2000EE;">
	Info
	<?php
	echo HTML::anchorIcon(
		"pencil.png", 
		"", 
		"/index/edit/id/".$company_id,
		"margin-left:5px;"
		);
	?>
    </h4>
    <div>
	Name: <?php echo $Company->getName(); ?> &nbsp;&nbsp;&nbsp; 
	DBA: <?php echo $Company->getDba(); ?> <br /> 
	Description: <span class="small"><?php echo $Company->getDescription(); ?></span>
    </div>
</div>
<div class="padded_frame" style="width: 415px;float: left;padding-top: 0px;">
    <div id="accordion">
	<h3>
	    <a href="#">Locations</a>
	    <?php 
		echo HTML::buttonBlue(
		    "add.png", 
		    "Add Location", 
		    "location_add", 
		    "float:right;width:130px;");
	    ?>
	</h3>
	<div>
	    <?php
	    /* @var $Location \Entities\Company\Location */
	    foreach ($Locations as $Location)
	    {
		?>
		<div style="padding: 3px;margin-bottom: 3px;">
		    <?php 
		    echo $Location->getName();
		    echo HTML::anchorIcon(
			    "bullet_go.png", 
			    "", 
			    "/location/view/id/".$Location->getId(),
			    "margin-left:5px;"
			    );
		    ?>
		</div>
		<?php
	    }
	    ?>
	</div>
	<hr />
	<h3>
	    <a href="#">Employees</a>
	    <?php 
		echo HTML::buttonBlue(
		    "add.png", 
		    "Add Employee", 
		    "employee_add", 
		    "float:right;width:130px;");
	    ?>
	</h3>
	<div>
	    <?php
	    /* @var $Employee \Entities\Company\Employee */
	    foreach ($Employees as $Employee)
	    {
		?>
		<div style="padding: 3px;margin-bottom: 3px;">
		    <?php 
		    echo $Employee->getFullName();
		    echo HTML::anchorIcon(
			    "bullet_go.png", 
			    "", 
			    "/employee/view/id/".$Employee->getId(),
			    "margin-left:5px;"
			    );
		    ?>
		</div>
		<?php
	    }
	    ?>
	</div>
	<hr />
    </div>
</div>
<div class="padded_frame" style="width: 415px;float: right;padding-top: 0px;">
    <h3>
	<a href="#">Suppliers</a>
    </h3>
    <div>
	<?php
	/* @var $Supplier \Entities\Company\Supplier */
	if(count($Suppliers)>0){
	    foreach ($Suppliers as $Supplier) {
		?>
		<div style="padding: 3px;margin-bottom: 3px;">
		    <?php 
		    echo $Supplier->getName();
		    echo HTML::anchorIcon(
			    "bullet_go.png", 
			    "", 
			    "/supplier/view/id/".$Supplier->getId(),
			    "margin-left:5px;"
			    );
		    ?>
		</div>
		<?php
	    }
	}
	else echo "No Suppliers";
	?>
    </div>
    <hr />
    <h3>
	<a href="#">Rto Providers</a>
	<?php 
	    echo HTML::buttonBlue(
		"add.png", 
		"Add Rto Provider", 
		"rto_provider_add", 
		"float:right;width:130px;");
	?>
    </h3>
    <div>
	<?php
	/* @var $RtoProvider \Entities\Company\RtoProvider */
	if(count($RtoProviders)>0)
	{
	    foreach ($RtoProviders as $RtoProvider)
	    {
		?>
		<div style="padding: 3px;margin-bottom: 3px;">
		    <?php 
		    echo $RtoProvider->getName();
		    echo HTML::anchorIcon(
			    "bullet_go.png", 
			    "", 
			    "/rto-provider/view/id/".$RtoProvider->getId(),
			    "margin-left:5px;"
			    );
		    ?>
		</div>
		<?php
	    }
	}
	else echo "No Suppliers";
	?>
    </div>
    <hr />
    <h3>
	<a href="#">Dealers</a>
	<?php 
	    echo HTML::buttonBlue(
		"add.png", 
		"Add Dealer", 
		"dealer_add", 
		"float:right;width:130px;");
	?>
    </h3>
    <div>
	<?php
	/* @var $Dealer \Entities\Company\Dealer */
	if(count($Dealers)>0)
	{
	    foreach ($Dealers as $Dealer)
	    {
		?>
		<div style="padding: 3px;margin-bottom: 3px;">
		    <?php 
		    echo $Dealer->getName();
		    echo HTML::anchorIcon(
			    "bullet_go.png", 
			    "", 
			    "/dealer/view/id/".$Dealer->getId(),
			    "margin-left:5px;"
			    );
		    ?>
		</div>
		<?php
	    }
	}
	else echo "No Dealers";
	?>
    </div>
    <hr />
    <h3>
	<a href="#">Websites</a>
	<?php 
	    echo HTML::buttonBlue(
		"add.png", 
		"Add Website", 
		"website_add", 
		"float:right;width:130px;");
	?>
    </h3>
    <div>
	<?php
	/* @var $Website \Entities\Company\Website */
	if(count($Websites)>0)
	{
	    foreach ($Websites as $Website)
	    {
		?>
		<div style="padding: 3px;margin-bottom: 3px;">
		    <?php 
		    echo $Website->getName();
		    echo HTML::anchorIcon(
			    "bullet_go.png", 
			    "", 
			    "/website/view/id/".$Website->getId(),
			    "margin-left:5px;"
			    );
		    ?>
		</div>
		<?php
	    }
	}
	else echo "No Websites";
	?>
    </div>
    <hr />
    <h3><a href="#">Documents</a></h3>
    <div>Put Documents here</div>
</div>
<div style="clear: both;"><input type="hidden" id="company_id" value="<?php echo $company_id;?>" /></div>
<script type="text/javascript">
    Company = new Company();
    Company.AddLocationOnclickBind($("#location_add"));
    Company.AddEmployeeOnclickBind($("#employee_add"));
    Company.AddWebsiteOnclickBind($("#website_add"));
    Company.AddRtoProviderOnclickBind($("#rto_provider_add"));
    Company.AddDealerOnclickBind($("#dealer_add"));
</script>
